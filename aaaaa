<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.querySelector('#defineform');
        const resultDiv = document.querySelector('#result');

        form.onsubmit = async function(e) {
            e.preventDefault();
            console.log('Form submitted');

            const formData = new FormData(form);
            const word = formData.get('defineword');
            console.log('Word to define:', word);

            if (word) {
                try {
                    const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
                    const data = await response.json();

                    if (Array.isArray(data) && data.length > 0) {
                        const definitions = data[0].meanings.flatMap(meaning =>
                            meaning.definitions.map(def => `<li>${def.definition}</li>`)).join('');

                        resultDiv.innerHTML = `
                            <h2>${word}</h2>
                            <ul>${definitions}</ul>
                        `;
                    } else {
                        resultDiv.innerHTML = `<p>No definitions found for "${word}".</p>`;
                    }
                } catch (error) {
                    resultDiv.innerHTML = '<p>An error occurred while fetching the definition.</p>';
                }
            }

            return false; // prevent reload
        };
    });
</script>